(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,t)=>{s.exports=e.r(76562)},23261,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566);function i(){let e=(0,a.useRouter)(),[i,n]=(0,t.useState)([]),[l,r]=(0,t.useState)(!0),[d,o]=(0,t.useState)(""),[c,h]=(0,t.useState)("");(0,t.useEffect)(()=>{m()},[]);let m=async()=>{try{if(!(await fetch("/api/auth/session")).ok)return void e.push("/admin/login");await u()}catch(s){e.push("/admin/login")}},u=async()=>{try{r(!0);let e=await fetch("/api/submissions");if(!e.ok)throw Error("Failed to load submissions");let s=await e.json();n(s)}catch(e){o(e instanceof Error?e.message:"Failed to load submissions")}finally{r(!1)}},j=async e=>{if(confirm("Are you sure you want to delete this submission?"))try{if(!(await fetch(`/api/submissions?id=${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete submission");n(i.filter(s=>s.id!==e))}catch(e){alert(e instanceof Error?e.message:"Failed to delete submission")}},x=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),e.push("/admin/login")}catch(e){console.error("Logout failed:",e)}},b=i.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase())||e.ipAddress.toLowerCase().includes(c.toLowerCase()));return(0,s.jsxs)("div",{className:"admin-dashboard",children:[(0,s.jsx)("header",{className:"admin-header",children:(0,s.jsxs)("div",{className:"admin-header-content",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:"/unit2go-logo.png",alt:"Unit2Go",className:"admin-logo"}),(0,s.jsx)("h1",{children:"Admin Dashboard"})]}),(0,s.jsx)("button",{onClick:x,className:"logout-button",children:"Logout"})]})}),(0,s.jsxs)("main",{className:"admin-content",children:[(0,s.jsxs)("div",{className:"admin-controls",children:[(0,s.jsx)("div",{className:"search-box",children:(0,s.jsx)("input",{type:"text",placeholder:"Search by name, email, or IP...",value:c,onChange:e=>h(e.target.value)})}),(0,s.jsxs)("div",{className:"admin-actions",children:[(0,s.jsx)("button",{onClick:u,className:"refresh-button",children:"Refresh"}),(0,s.jsx)("button",{onClick:()=>{let e=new Blob([["ID,Name,Email,IP Address,Created At,Model ID",...b.map(e=>[e.id,e.name,e.email,e.ipAddress,new Date(e.createdAt).toLocaleString(),e.modelId||"N/A"]).map(e=>e.map(e=>`"${e}"`).join(","))].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`submissions-${new Date().toISOString().split("T")[0]}.csv`,t.click(),URL.revokeObjectURL(s)},className:"export-button",children:"Export CSV"})]})]}),d&&(0,s.jsx)("div",{className:"error-message",children:d}),l?(0,s.jsx)("div",{className:"loading",children:"Loading submissions..."}):(0,s.jsx)("div",{className:"submissions-table-container",children:(0,s.jsxs)("table",{className:"submissions-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Email"}),(0,s.jsx)("th",{children:"IP Address"}),(0,s.jsx)("th",{children:"Created At"}),(0,s.jsx)("th",{children:"Model ID"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===b.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"no-data",children:c?"No matching submissions found":"No submissions yet"})}):b.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.email}),(0,s.jsx)("td",{children:e.ipAddress}),(0,s.jsx)("td",{children:new Date(e.createdAt).toLocaleString()}),(0,s.jsx)("td",{children:e.modelId||"N/A"}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>j(e.id),className:"delete-button",children:"Delete"})})]},e.id))})]})}),(0,s.jsxs)("div",{className:"admin-stats",children:[(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Total Submissions"}),(0,s.jsx)("p",{className:"stat-number",children:i.length})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Filtered Results"}),(0,s.jsx)("p",{className:"stat-number",children:b.length})]})]})]})]})}e.s(["default",()=>i])}]);